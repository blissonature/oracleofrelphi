<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>Planetary Hours</title>
<style>
    :root{
      --bg:#0b0d10; --panel:#11151a; --muted:#96a1b0; --text:#e9eef5; --ring:#263244;
      --chip:#1a2028; --accent:#7aa2ff; --ok:#59d69e; --warn:#ffd166; --bad:#ef6b73;
      --saturn:#c0b28a; --sun:#ffb100; --moon:#c9d6ff; --mars:#ff6b6b; --mercury:#8bd3ff; --jupiter:#9dde7a; --venus:#ff9ad1;
    }
    html,body{height:100%}
    body{margin:0;background:var(--bg);color:var(--text);font:15px/1.4 system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans"}
    a{color:var(--accent);text-decoration:none}
    a:hover{text-decoration:underline}
    .wrap{max-width:1100px;margin:0 auto;padding:18px}
    header{position:sticky;top:0;z-index:50;background:linear-gradient(180deg,rgba(11,13,16,.95),rgba(11,13,16,.75));backdrop-filter:saturate(1.2) blur(8px);border-bottom:1px solid var(--ring)}
    header .row{display:flex;gap:12px;align-items:center;justify-content:space-between;padding:12px 0}
    .title{font-size:24px;font-weight:700}
    .clock{font-variant-numeric:tabular-nums;border:1px solid var(--ring);padding:6px 10px;border-radius:10px;background:var(--chip)}
    .btn{background:#1d2430;border:1px solid var(--ring);color:var(--text);padding:8px 10px;border-radius:10px;cursor:pointer}
    .btn:disabled{opacity:.6;cursor:not-allowed}
    .pill{display:inline-flex;gap:6px;align-items:center;padding:4px 8px;border-radius:999px;border:1px solid var(--ring);background:var(--chip);font-weight:600}
    .tiny{font-size:12px;color:var(--muted)}
    .section{border:1px solid var(--ring);border-radius:14px;padding:12px;margin-top:14px;background:var(--panel)}
    .row{display:flex;flex-wrap:wrap;gap:10px;align-items:center}
    .row > *{margin-right:6px}
    .grow{flex:1}
    select, input[type="text"], input[type="number"], input[type="time"], input[type="date"]{background:#0f141b;color:var(--text);border:1px solid var(--ring);border-radius:10px;padding:8px}
    label.switch{display:inline-flex;align-items:center;gap:8px;cursor:pointer}
    label.switch input{appearance:none;width:38px;height:22px;border-radius:999px;background:#111a24;border:1px solid var(--ring);position:relative;outline:none}
    label.switch input:checked{background:#17314f}
    label.switch input::after{content:"";position:absolute;top:2px;left:2px;width:16px;height:16px;border-radius:999px;background:#dbe3f1;transition:left .2s}
    label.switch input:checked::after{left:19px}

    .hero{display:grid;grid-template-columns:1fr;gap:12px}
    .ticker{position:relative;border:1px solid var(--ring);border-radius:12px;height:18px;background:#0e141b;overflow:hidden}
    .bar{position:absolute;top:0;bottom:0;width:2px;background:var(--ok)}
    .day-start,.day-end{position:absolute;top:0;bottom:0;width:2px;background:var(--accent)}
    .sunrise,.sunset{position:absolute;top:0;bottom:0;width:2px;background:var(--warn)}
    .ticker-labels{display:flex;justify-content:space-between;font-variant-numeric:tabular-nums}
    .hero-core{display:grid;gap:10px;justify-items:center;text-align:center}
    .mult{font-size:38px;font-weight:800;letter-spacing:.5px}
    .ord{display:flex;gap:8px;flex-wrap:wrap;justify-content:center}
    .chips{display:flex;gap:8px;flex-wrap:wrap;justify-content:center}

    table{width:100%;border-collapse:separate;border-spacing:0}
    thead th{position:sticky;top:0;background:#0e1319;border-bottom:1px solid var(--ring);z-index:5}
    th,td{padding:8px;border-bottom:1px solid var(--ring);vertical-align:top}
    tr.active{background:rgba(122,162,255,.08)}
    .bdg{display:inline-block;padding:2px 6px;border-radius:999px;border:1px solid var(--ring);font-size:12px}
    .bdg.bright{background:rgba(255,177,0,.1);border-color:#614d1a}
    .bdg.dark{background:rgba(96,115,148,.2)}

    .matrix{overflow:auto}
    .matrix table td{min-width:160px}

    details{border:1px dashed var(--ring);border-radius:12px;padding:10px}

    .dot{display:inline-block;width:10px;height:10px;border-radius:50%;margin-right:6px;vertical-align:middle}
    .p-saturn{color:var(--saturn)} .p-sun{color:var(--sun)} .p-moon{color:var(--moon)} .p-mars{color:var(--mars)} .p-mercury{color:var(--mercury)} .p-jupiter{color:var(--jupiter)} .p-venus{color:var(--venus)}
    .d-saturn{background:var(--saturn)} .d-sun{background:var(--sun)} .d-moon{background:var(--moon)} .d-mars{background:var(--mars)} .d-mercury{background:var(--mercury)} .d-jupiter{background:var(--jupiter)} .d-venus{background:var(--venus)}

    .grid-2{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    @media (max-width:900px){.grid-2{grid-template-columns:1fr}}
  </style>
<script src="suncalc.js"></script>
</head>
<body><div id="nav-placeholder"></div>
<header>
<div class="wrap">
<div class="row">
<div class="title">Planetary Hours</div>
<div class="row">
<div class="clock" id="localClock">--:--</div>
<button class="btn" id="copyLink">Copy link to this view</button>
</div>
</div>
</div>
</header>
<main class="wrap">
<section class="section" id="controls">
<div class="row" style="gap:14px">
<button class="btn" id="useGeo">Use my location</button>
<label>Timezone
          <select id="tzSelect"></select>
</label>
<label>Lat <input id="lat" step="0.0001" style="width:120px" type="number"/></label>
<label>Lon <input id="lon" step="0.0001" style="width:120px" type="number"/></label>
<button class="btn" id="setLatLon">Set</button>
<div class="tiny" id="echo">—</div>
</div>
<div class="row" style="gap:14px;margin-top:10px">
<label class="switch">Use system date/time <input checked="" id="useSystem" type="checkbox"/></label>
<div class="row" id="manualTime" style="display:none">
<label>Date <input id="datePick" type="date"/></label>
<label>Time <input id="timePick" type="time"/></label>
<button class="btn" id="applyDT">Apply</button>
</div>
<div class="tiny">Day runs sunrise→sunrise.</div>
</div>
<div class="row" style="gap:14px;margin-top:10px">
<label>Weights:
          <select id="mode">
<option value="sidereal">Sidereal (default)</option>
<option value="ratio">Current Hour / Total Hours today (this ruler)</option>
<option value="hybrid">Hybrid (sidereal×synodic)</option>
</select>
</label>
</div>
</section>
<section class="section" id="daySummary">
<div class="grid-2">
<div>
<div class="pill" id="dayRuler"></div>
<div class="tiny" id="dayRulerMeta"></div>
</div>
<div>
<div>Sun times:</div>
<div class="tiny" id="sunTimes"></div>
<div class="tiny" id="bridgeInfo" style="margin-top:6px"></div>
</div>
</div>
</section>
<section class="section hero" id="hero">
<div class="ticker" id="ticker">
<div class="day-start" id="dayStart"></div>
<div class="sunrise" id="sunriseBar"></div>
<div class="sunset" id="sunsetBar"></div>
<div class="day-end" id="dayEnd"></div>
<div class="bar" id="progress"></div>
</div>
<div class="ticker-labels tiny"><span id="lblStart">--:--</span><span id="lblEnd">--:--</span></div>
<div class="hero-core">
<div class="pill" id="currentHourPill">—</div>
<div class="mult" id="mult">x—</div>
<div class="ord" id="ordLine">Power = (day×hour)×(1/ord) + ord</div>
<div class="tiny" id="hourMeta"></div>
<div class="chips" id="legendChips"></div>
</div>
</section>
<section class="section" id="tableSection">
<div style="overflow:auto; max-height:460px">
<table id="hoursTable">
<thead>
<tr>
<th>#</th><th>Start–End</th><th>Ruler</th><th>Order</th><th>Hour n/24</th><th>Hours ruled (B/D/T)</th><th>Multiplier</th><th>Focus</th>
</tr>
</thead>
<tbody></tbody>
</table>
</div>
</section>
<section class="section" id="matrixSection">
<div class="row" style="justify-content:space-between"><div>7×7 Focus Matrix</div>
<label>Filter: 
          <select id="matrixFilter"><option value="all">All</option><option value="bright">Bright</option><option value="dark">Dark</option></select>
</label>
</div>
<div class="matrix" style="margin-top:8px">
<table id="matrixTable"><thead></thead><tbody></tbody></table>
</div>
</section>
<section class="section" id="bridgePanel">
<div>Weekly Bridge Hours (last dark → first bright)</div>
<div style="overflow:auto">
<table id="bridgeTable">
<thead><tr><th>Day (last hour)</th><th>Multiplier</th><th>Next day (first hour)</th><th>Multiplier</th><th>Δ</th></tr></thead>
<tbody></tbody>
</table>
</div>
</section>
<section class="section">
<details>
<summary>About / Help</summary>
<p><b>Multipliers.</b> Default “Sidereal” mode uses the orbital periods (Earth years) as weights: Saturn 29.46, Jupiter 11.86, Mars 1.88, Sun 1, Venus 0.615, Mercury 0.241, Moon 0.0748. Power for an hour = (DayWeight × HourWeight) × (1/ordinal) + ordinal. “Ratio” mode scales by how many hours this ruler holds today (bright+dark), and “Hybrid” multiplies Sidereal × (synodic-hour fraction).</p>
<p><b>Sunrise→Sunrise frame.</b> The “day” begins at local sunrise and ends at the next sunrise.</p>
<p><b>Ordinals &amp; Harmonics.</b> 1st Fundamental, 2nd Octave, 3rd Fifth, 4th Double Octave. Higher ordinals continue similarly; lower ordinals amplify power in the formula via 1/ordinal.</p>
<p><b>Legend.</b> Bright = post‑sunrise half; Dark = post‑sunset half. Bridge hour is the final hour before sunrise of the next day; its ruler hands the baton to Hour 1.</p>
<p><b>Modes.</b> Sidereal / Ratio / Hybrid as above.</p>
</details>
</section>
</main>

<script src="navloader.js"></script><script src="planetaryhours.js"></script></body>
</html>
